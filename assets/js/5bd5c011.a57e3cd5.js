"use strict";(self.webpackChunkbloksec_docs=self.webpackChunkbloksec_docs||[]).push([[1766],{6723:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>a});var o=s(5893),i=s(1151);const t={id:"integration-google-workspace",title:"Google Workspace",sidebar_position:3,createdAt:new Date("2022-03-21T01:36:42.000Z"),updatedAt:new Date("2023-06-15T15:15:38.000Z"),tags:["Integration","Google","SAML2"]},r=void 0,l={id:"integrations/integration-google-workspace",title:"Google Workspace",description:"BlokSec can be configured to support passwordless login to your Google Workspace, and also supports provisioning.",source:"@site/docs/integrations/google-workspace.md",sourceDirName:"integrations",slug:"/integrations/integration-google-workspace",permalink:"/docs/integrations/integration-google-workspace",draft:!1,unlisted:!1,tags:[{label:"Integration",permalink:"/docs/tags/integration"},{label:"Google",permalink:"/docs/tags/google"},{label:"SAML2",permalink:"/docs/tags/saml-2"}],version:"current",sidebarPosition:3,frontMatter:{id:"integration-google-workspace",title:"Google Workspace",sidebar_position:3,createdAt:"2022-03-21T01:36:42.000Z",updatedAt:"2023-06-15T15:15:38.000Z",tags:["Integration","Google","SAML2"]},sidebar:"integrationsSidebar",previous:{title:"Microsoft365 Integration (Formerly Office365)",permalink:"/docs/integrations/integration-microsoft365"},next:{title:"Dropbox",permalink:"/docs/integrations/integration-dropbox"}},c={},a=[{value:"Authentication Configuration",id:"authentication-configuration",level:2},{value:"Create Application from Template",id:"create-application-from-template",level:3},{value:"Google Workspace Admin Console",id:"google-workspace-admin-console",level:3},{value:"Provisioning Configuration",id:"provisioning-configuration",level:2},{value:"Google Cloud Console",id:"google-cloud-console",level:3},{value:"BlokSec Admin UI",id:"bloksec-admin-ui",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"BlokSec can be configured to support passwordless login to your Google Workspace, and also supports provisioning."}),"\n",(0,o.jsx)(n.h2,{id:"authentication-configuration",children:"Authentication Configuration"}),"\n",(0,o.jsx)(n.p,{children:"The BlokSec \u2194\ufe0f Google Workspace authentication integration enables strong, passwordless authentication via the SAML protocol. Configuration involves a few simple steps on both the BlokSec admin UI and the Google Workspace admin console."}),"\n",(0,o.jsx)(n.h3,{id:"create-application-from-template",children:"Create Application from Template"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Sign into BlokSec admin UI as a user with admin privileges for your tenant"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["On the main dashboard, click the ",(0,o.jsx)(n.strong,{children:"Add Application"})," drop-down and select ",(0,o.jsx)(n.strong,{children:"Create From Template"}),", and select ",(0,o.jsx)(n.strong,{children:"Google Workspace"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Complete the application details as follows and submit:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Name:"})," Google Workspace (or your desired application name \u2013 we will assume this is called \u2018Google\u2019 for the remainder of this article)"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Entity ID:"})," ",(0,o.jsx)(n.code,{children:"https://www.google.com/a/<your_domain>/acs"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"NameID Source:"})," Account name"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Assertion Consumer Service:"})," ",(0,o.jsx)(n.code,{children:"https://www.google.com/a/<your_domain>/acs"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Name ID Format:"})," EmailAddress (keep default value of EmailAddress)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"Submit"})," to save the configuration"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"View Cert"})," and then select ",(0,o.jsx)(n.strong,{children:"Copy"}),". Paste the certificate in a text editor of your choice and save the file as ",(0,o.jsx)(n.code,{children:"BlokSecGoogleCert.pem"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Make note of the SSO Uri as it will be required when configuring Google Workspace"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"google-workspace-admin-console",children:"Google Workspace Admin Console"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Sign into the Google Workspace admin console as a user with admin privileges for your tenant"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Navigate to ",(0,o.jsx)(n.strong,{children:"Security > Setup single sign-on (SSO) with a third party IdP"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Complete the identity provider configuration with the following values (adjusting if required to meet your desired behaviour):"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Sign-in page URL:"})," Copy / enter the SSO Uri noted in step 6 above"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Sign-out page URL:"})," ",(0,o.jsx)(n.code,{children:"https://mail.google.com/a/<your_domain>"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Verification certificate:"})," Upload the certificate file saved in step 5 above"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"Save"})," to apply the configuration changes"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Send your users the following URL to login via passwordless ",(0,o.jsx)(n.em,{children:(0,o.jsx)(n.code,{children:"https://mail.google.com/a/<your_domain>"})})," (for example, internally at BlokSec we use ",(0,o.jsx)(n.a,{href:"https://mail.google.com/a/bloksec.com",children:"https://mail.google.com/a/bloksec.com"}),")"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"provisioning-configuration",children:"Provisioning Configuration"}),"\n",(0,o.jsx)(n.p,{children:"When provisioning support is configured, you are able to create Google users in one step using the BlokSec admin console rather than having to create them in Google and then having to create a corresponding account in BlokSec."}),"\n",(0,o.jsx)(n.h3,{id:"google-cloud-console",children:"Google Cloud Console"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Log into the Google developer console at ",(0,o.jsx)(n.a,{href:"https://console.developers.google.com/start",children:"https://console.developers.google.com/start"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create a new project, and give it a name (I've used ",(0,o.jsx)(n.em,{children:"BlokSec API Access"}),")\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/Y16ERowC9pyZt39fvHA2s_screenshot-2023-06-15-at-93901-am.png",alt:"Create project"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Then provide the project details:\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/O2VtwfAkuP0Odz7qcE4Ir_screenshot-2023-06-15-at-93946-am.png",alt:"Provide project details"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click on ",(0,o.jsx)(n.strong,{children:"Credentials"}),"\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/CPD7Xure5nx54Rib9rSs3_screenshot-2023-06-15-at-94037-am.png",alt:"Credentials menu item"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click on ",(0,o.jsx)(n.strong,{children:"+ CREATE CREDENTIALS"})," and then select ",(0,o.jsx)(n.strong,{children:"OAuth Client ID"}),"\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/QEP-AsoWZBhdmCqD3ZMOQ_screenshot-2023-06-15-at-94114-am.png",alt:"Create credentials location"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"If you have not aready done so, you will be prompted to create a consent screen"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click the ",(0,o.jsx)(n.strong,{children:"CREATE CONSENT SCREEN"})," button\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/dRmRLhJcYyzthrX4_1WeS_screenshot-2023-06-15-at-94158-am.png",alt:"Create consent"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Select ",(0,o.jsx)(n.strong,{children:"Internal"}),"\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/ggxH6rlzVJv2P9XZO10Gp_screenshot-2023-06-15-at-94254-am.png",alt:"Internal"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Provide an App name (we have used ",(0,o.jsx)(n.em,{children:"BlokSec Provisioning Integration"})," in the example)\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/6GPAaWTlu2E80APpSom39_screenshot-2023-06-15-at-95125-am.png",alt:"App name"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Leave the scopes blank\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/gnrHXcoor7eSkGyU0qvA3_screenshot-2023-06-15-at-95347-am.png",alt:"Scopes"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"SAVE AND CONTINUE"})," then ",(0,o.jsx)(n.strong,{children:"BACK TO DASHBOARD."})]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["You will have to return to the ",(0,o.jsx)(n.strong,{children:"Credentials"})," section and click on ",(0,o.jsx)(n.strong,{children:"+ CREATE CREDENTIALS"})," to return to the OAuth Client ID creation screen"]})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["For ",(0,o.jsx)(n.strong,{children:"Application type"}),", select ",(0,o.jsx)(n.strong,{children:"Web application"}),"\n",(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/yvuRir1-KzPADRo9UG4Ro_screenshot-2023-06-15-at-110745-am.png",alt:"Select web application"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Provide a name (we have used ",(0,o.jsx)(n.em,{children:"BlokSec Provisioning Integration"})," in the example) and provide the following values for authorized URIs:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Authorized JavaScript origins:"})," ",(0,o.jsx)(n.code,{children:"https://api.bloksec.io"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Authorized redirect URIs:"})," ",(0,o.jsx)(n.code,{children:"https://api.bloksec.io/oauth2callback"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/9dDS6Ggj8mZnGjAyj-mFk_screenshot-2023-06-15-at-111146-am.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"CREATE"})," to finish - you will be presented with a confirmating dialog; click ",(0,o.jsx)(n.strong,{children:"DOWNLOAD JSON"})," and save the file locally for use in the BlokSec Admin UI"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://s3.us-east-2.amazonaws.com/io.bloksec.static-hosting/docs/uJPrIlqO4AQTABHo0hlbw_screenshot-2023-06-15-at-111308-am.png",alt:""})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"An easier way to generate the tokens is to use the Google OAuth Playground:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://developers.google.com/oauthplayground/",children:"https://developers.google.com/oauthplayground/"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Refer to this ",(0,o.jsx)(n.a,{href:"https://documentation.sailpoint.com/connectors/identityiq/google_workspace/help/integrating_g_suite/prereqs_for_oauth_2_0.html",children:"SailPoint document"})," for instructions to use Google OAuth Playground. Refer section Generating OAuth 2.0 Authentication Credentials."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["We only need ",(0,o.jsx)(n.code,{children:"https://www.googleapis.com/auth/admin.directory.user"})," as the scope for creating users."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Once you have the oath2 credentials (JSON file) and the refresh_token, move to configuring the application on Bloksec Admin UI."}),"\n",(0,o.jsx)(n.h3,{id:"bloksec-admin-ui",children:"BlokSec Admin UI"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Open the Google Workspace application"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Open the settings menu and click ",(0,o.jsx)(n.strong,{children:"Edit Application"})," "]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click on the ",(0,o.jsx)(n.strong,{children:"Provisioning Tab"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Select Enable Provisioning checkbox\nIn the properties field, paste the contents on the oauth2 credentials file that you downloaded earlier from google.\nIn this JSON add an additional key called refresh_token, and set the value as the refresh_token that was generated earlier.\nIt should look something like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "installed": {\n      "client\\_id": "773006386462-mjn15pflv6uh7c14dkbcf8f9vv0h9.apps.googleusercontent.com",\n      "project\\_id": "bloksecprovisioning",\n      "auth\\_uri": "<https://accounts.google.com/o/oauth2/auth>",\n      "token\\_uri": "<https://oauth2.googleapis.com/token>",\n      "auth\\_provider\\_x509\\_cert\\_url": "<https://www.googleapis.com/oauth2/v1/certs>",\n      "client\\_secret": "GOCSPX-zte0os99l3J8in\\_fzithqQNss",\n      "redirect\\_uris": \\[\n          "<http://localhost:3000/oauth2callback>"\n      ],\n      "refresh\\_token": "1//0g4VE9LxJ4ivsCgRAAGBASNwF-L9IrdPDPRD9Q2QT-0eVs79puXz9pim9I\\_IR919HXZpUrqLNWFyMzt4Unq8nbt4gYRMObY74"\n  }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Save the application."}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"Now, every time an account is registered on BlokSec, a new user will be created on Google Workspace. All permissions/access will need to be granted on Google Workspace."})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>r});var o=s(7294);const i={},t=o.createContext(i);function r(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);