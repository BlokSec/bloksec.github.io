<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-integrations/integration-microsoft365" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Microsoft365 Integration (Formerly Office365) | BlokSec Technical Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://bloksec.github.io/img/bloksec-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://bloksec.github.io/img/bloksec-social-card.jpg"><meta data-rh="true" property="og:url" content="https://bloksec.github.io/docs/integrations/integration-microsoft365"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Microsoft365 Integration (Formerly Office365) | BlokSec Technical Documentation"><meta data-rh="true" name="description" content="BlokSec can be configured to support passwordless login and (optionally) user provisioning to Microsoft 365 (formerly known as Office 365)."><meta data-rh="true" property="og:description" content="BlokSec can be configured to support passwordless login and (optionally) user provisioning to Microsoft 365 (formerly known as Office 365)."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://bloksec.github.io/docs/integrations/integration-microsoft365"><link data-rh="true" rel="alternate" href="https://bloksec.github.io/docs/integrations/integration-microsoft365" hreflang="en"><link data-rh="true" rel="alternate" href="https://bloksec.github.io/docs/integrations/integration-microsoft365" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.649659f5.css">
<script src="/assets/js/runtime~main.afd11655.js" defer="defer"></script>
<script src="/assets/js/main.b331f6ff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon.svg" alt="BlokSec Icon" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/icon-dark.svg" alt="BlokSec Icon" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">BlokSec Docs</b></a><a class="navbar__item navbar__link" href="/docs/tutorial/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/integrations/intro">Integrations</a><a class="navbar__item navbar__link" href="/docs/api/intro">API Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bloksec" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/integrations/intro">Integrations Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/integrations/integration-microsoft365">Microsoft365 Integration (Formerly Office365)</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Microsoft365 Integration (Formerly Office365)</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Microsoft365 Integration (Formerly Office365)</h1></header><p>BlokSec can be configured to support passwordless login and (optionally) user provisioning to Microsoft 365 (formerly known as Office 365).</p>
<p>BlokSec&#x27;s Microsoft365 integration enables authentication via the WS-FED protocol. Configuration involves steps on both the BlokSec Admin UI and Microsoft Azure Active Directory (AAD) using PowerShell.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>How Microsoft 365 Federation Works</div><div class="admonitionContent_BuS1"><p>Microsoft allows administrators to federate (a form of delegation whereby a third party is trusted to perform user authentication) one or more of their domains to BlokSec. </p><p>When configuring Microsoft 365 for your company (or client), you will have chosen a domain name - Microsoft assigns an &#x27;onmicrosoft.com&#x27; suffix to your domain. For example: <code>company_name.onmicrosoft.com</code> . In addition to the onmicrosoft.com base domain, you can also configure a custom domain (or domains); for example: <code>company_name.com</code>. Once a custom domain has been added, that domain can be made default, meaning that user email addresses and logins would be associated with this domain by default.</p><p>Here is an example company that has created a custom domain with their company&#x27;s name as the default domain (<a href="https://admin.microsoft.com" target="_blank" rel="noopener noreferrer">admin.microsoft.com</a> &gt; <strong>Settings</strong> &gt; <strong>Domains</strong>):</p><p><img loading="lazy" src="https://archbee-image-uploads.s3.amazonaws.com/VWdvJhEwmWfQ4iv0DDt5P/XWT1KiIIMUWF3HmQZO-4M_monosnap-domains-microsoft-365-admin-center-2023-09-21-14-35-51.png" alt="Microsoft Admin Domain Confit" class="img_ev3q"></p><p>Microsoft <strong>does not allow</strong> the .onmicrosoft.com domain to be federated and <strong>does not allow</strong> a domain&#x27;s &#x27;Default&#x27; domain to be federated. Therefore, to allow the custom domain (e.g. company_name.com) to be federated for passwordless login, it must not be the &#x27;Default&#x27; domain. For more information, see Domain Federation below.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>How Microsoft 365 Provisioning Works</div><div class="admonitionContent_BuS1"><p>If provisioning is enabled in BlokSec, users created from the BlokSec Admin UI will automatically be provisioned (created) in Microsoft 365&#x27;s directory (Azure Active Directory) using Microsoft&#x27;s Graph API. This is provided as a convenience to save administrators having to create accounts in both places. Once the user has been created in BlokSec, open their newly created account in the M365 console (<a href="https://admin.microsoft.com" target="_blank" rel="noopener noreferrer">https://admin.microsoft.com</a>)<!-- --> to assign M365 licences as required.  </p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-authentication-in-the-bloksec-admin-ui">Configure Authentication in the BlokSec Admin UI<a href="#configure-authentication-in-the-bloksec-admin-ui" class="hash-link" aria-label="Direct link to Configure Authentication in the BlokSec Admin UI" title="Direct link to Configure Authentication in the BlokSec Admin UI">​</a></h3>
<ol>
<li>
<p>Sign into BlokSec admin UI with admin privileges for your tenant</p>
</li>
<li>
<p>On the main dashboard, click the <strong>Add Application</strong> drop-down and select <strong>Create From Template</strong>, and select <strong>Microsoft 365</strong></p>
</li>
<li>
<p>Complete the application details as follows and submit:</p>
<ul>
<li><strong>Name:</strong> Microsoft 365 (or your desired application name – we will assume this is called ‘Microsoft 365’ for the remainder of this article)</li>
</ul>
</li>
<li>
<p>Click <strong>Submit</strong>to save the configuration</p>
</li>
<li>
<p>Select <strong>View PS Script</strong> and copy the contents to an editor. Update the <code>&lt;domain_name&gt;</code> parameter to the value of your tenant&#x27;s custom domain. </p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="domain-federation-via-powershell">Domain Federation via PowerShell<a href="#domain-federation-via-powershell" class="hash-link" aria-label="Direct link to Domain Federation via PowerShell" title="Direct link to Domain Federation via PowerShell">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>You can only federate a custom domain (i.e., not your <code>&lt;tenant&gt;.onmicrosoft.com</code> domain) and the domain can not be the default domain for the organization.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p><strong>Domain Best Practice</strong></p><p>Make your <code>&lt;tenant&gt;.onmicrosoft.com</code> domain the &#x27;Default&#x27; domain for your tenant, and then federate your custom domain</p><p>Example from BlokSec&#x27;s Luvion demonstration tenant:</p><p><img loading="lazy" src="https://archbee-image-uploads.s3.amazonaws.com/VWdvJhEwmWfQ4iv0DDt5P/oDmrJnbfU6fP0iiaYrn60_monosnap-domains-microsoft-365-admin-center-2023-09-21-14-45-35.png" alt="Example of a correct configuration for BlokSec federation" class="img_ev3q"></p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h4>
<ul>
<li>
<p>Before you can federate users from Microsoft 365 to BlokSec, you need to add a custom domain to your Microsoft 365 tenant. If you have not done this, please <a href="https://support.office.com/en-US/Article/Add-your-domain-to-Office-365-ffdb2216-330d-4d73-832b-3e31bcb5b2a7?ui=en-US&amp;rs=en-US&amp;ad=US" target="_blank" rel="noopener noreferrer">follow these instructions</a> on how to add your domain. Note that the *.onmicrosoft.com domains cannot be federated. Also note that during the addition of the domain (on step 2 of the process), Microsoft 365 will ask if you want to add users, select the option &quot;I don&#x27;t want to add users right now.&quot;</p>
</li>
<li>
<p>You will need to use the Microsoft PowerShell tool. Here are the <a href="http://technet.microsoft.com/library/jj151815.aspx" target="_blank" rel="noopener noreferrer">instructions</a> to install the Microsoft Online Services Sign-In Assistant and the Azure Active Directory Module for Windows PowerShell.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4>
<ol>
<li>
<p>In PowerShell, type the following command and enter your administrator credential for your Office 365 tenant when prompted: <code>Connect-MsolService</code></p>
</li>
<li>
<p>Once successfully connected, copy the updated version of the<strong>PS Script</strong> updated with your custom domain from step #5 above and paste / enter in PowerShell command prompt</p>
</li>
<li>
<p>The provide <strong>PS Script</strong> follows the federation configuration command with a <code>Get-MsolDomainFederationSettings</code> command that should provide confirmation that the domain was successfully federated with BlokSec for authentication:</p>
<ol>
<li><img loading="lazy" src="https://archbee-image-uploads.s3.amazonaws.com/VWdvJhEwmWfQ4iv0DDt5P/s1X7_7Rhxd-oeBYYz5T4u_screenshot2023-04-17at102836am.png" alt="Example output from successful command execution" class="img_ev3q"></li>
</ol>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h4>
<p>If you receive a message concerning default domain:</p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Set-MsolDomainAuthentication : You cannot remove this domain as the default domain without replacing it with another default domain. Use the the Set-MsolDomain cmdlet to set another domain as the default domain before you delete this domain.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ensure that the domain being federated is not the Default domain for the organization</p>
<ul>
<li>
<p>In the admin center, go to the <strong>Settings</strong> &gt; <strong>Domains</strong> page.</p>
</li>
<li>
<p>On the Domains page, select the domain you want to set as the default (note that this cannot be the domain you are federating, so if you have only one custom domain, e.g., <code>company.com</code>, change this back to the Microsoft-provided onmicrosoft.com domain, e.g., <code>company.onmicrosoft.com</code>)</p>
</li>
<li>
<p>Select <strong>Set as default</strong></p>
</li>
</ul>
<p>Backing Out
To remove the federation from the selected domain, run the command:</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Set-MsolDomainAuthentication -DomainName &lt;domain_name&gt; -Authentication managed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="provisioning">Provisioning<a href="#provisioning" class="hash-link" aria-label="Direct link to Provisioning" title="Direct link to Provisioning">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="azure-ad-administration-portal">Azure AD Administration Portal<a href="#azure-ad-administration-portal" class="hash-link" aria-label="Direct link to Azure AD Administration Portal" title="Direct link to Azure AD Administration Portal">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-application">Create Application<a href="#create-application" class="hash-link" aria-label="Direct link to Create Application" title="Direct link to Create Application">​</a></h4>
<ol>
<li>
<p>Open a browser and navigate to the <a href="https://aad.portal.azure.com" target="_blank" rel="noopener noreferrer">Azure Active Directory Admin Center</a> and login using an account with <strong>Global Administrator</strong> permissions (if your organization is simply subscribing to Microsoft 365 for email and Office applications, this is the same account you use to login to the <a href="https://admin.microsoft.com" target="_blank" rel="noopener noreferrer">https://admin.microsoft.com</a> portal)</p>
</li>
<li>
<p>Select <strong>Azure Active Directory</strong> in the left-hand navigation, then select <strong>App registrations</strong> under <strong>Manage</strong>.</p>
</li>
<li>
<p>Select <strong>New registration</strong>. Enter a name for your application, for example, <em>BlokSec Provisioning Integration.</em></p>
</li>
<li>
<p>Set <strong>Supported account types</strong> as <strong>Accounts in this organizational directory only</strong>.</p>
</li>
<li>
<p>Leave <strong>Redirect URI</strong> empty.</p>
</li>
<li>
<p>Select <strong>Register</strong>. On the application&#x27;s <strong>Overview</strong> page, copy the value of the <strong>Application (client) ID</strong>, this is your <code>client_id</code> that you will need it in the next step.</p>
</li>
<li>
<p>Select <strong>Authentication</strong> under <strong>Manage</strong>. Locate the <strong>Advanced settings</strong> section and change the <strong>Allow public client flows</strong> toggle to <strong>Yes</strong>, then choose <strong>Save</strong>.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-api-permissions">Configure API Permissions<a href="#configure-api-permissions" class="hash-link" aria-label="Direct link to Configure API Permissions" title="Direct link to Configure API Permissions">​</a></h3>
<p><strong>Note:</strong> This section requires a work/school account with the Global administrator role (this would be the first account you created when subscribing to Microsoft 365).</p>
<ol>
<li>
<p>Select <strong>API permissions</strong> under <strong>Manage</strong>.</p>
</li>
<li>
<p>Remove the default <strong>User.Read</strong> permission under <strong>Configured permissions</strong> by selecting the ellipses (<strong>...</strong>) in its row and selecting <strong>Remove permission</strong>.</p>
</li>
<li>
<p>Select <strong>Add a permission</strong>, then <strong>Microsoft Graph</strong>.</p>
</li>
<li>
<p>Select <strong>Application permissions</strong>.</p>
</li>
<li>
<p>Select <strong>User.ReadWrite.All</strong>, then select <strong>Add permissions</strong>.</p>
</li>
<li>
<p>Select <strong>Grant admin consent for...</strong>, then select <strong>Yes</strong> to provide admin consent for the selected permission.</p>
</li>
<li>
<p>Select <strong>Certificates and secrets</strong> under <strong>Manage</strong>, then select <strong>New client secret</strong>.</p>
</li>
<li>
<p>Enter a description, choose a duration, and select <strong>Add</strong>.</p>
</li>
<li>
<p>Copy the secret from the <strong>Value</strong> column, this is your <code>client_secret</code> that you will need it in the next steps.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-provisioning-in-the-bloksec-admin-ui">Configure Provisioning in the BlokSec Admin UI<a href="#configure-provisioning-in-the-bloksec-admin-ui" class="hash-link" aria-label="Direct link to Configure Provisioning in the BlokSec Admin UI" title="Direct link to Configure Provisioning in the BlokSec Admin UI">​</a></h3>
<ol>
<li>
<p>Sign into BlokSec admin UI with admin privileges for your tenant</p>
</li>
<li>
<p>Select your Microsoft 365 application then edit the configuration (top right cog icon &gt; <strong>Edit Application</strong>)</p>
</li>
<li>
<p>Go to the provisioning tab</p>
</li>
<li>
<p>Check the <strong>Enable provisioning</strong> checkbox</p>
</li>
<li>
<p>Enter the following JSON data into the <strong>Properties (JSON)</strong> text area <em><strong>(CHANGE THE PLACEHOLDER VALUES TO THE CORRECT VALUES FOR YOUR MICROSOFT 365 TENANT)</strong></em>:</p>
</li>
</ol>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;client_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;client_id&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;client_secret&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;client_secret&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;tenant_domain&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;domain_name&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="https://archbee-image-uploads.s3.amazonaws.com/VWdvJhEwmWfQ4iv0DDt5P/bnUpIviMFTa4hrh0iebL__screenshot2023-04-17at112243am.png" alt="Example provisioning configuration" class="img_ev3q"></p>
<ul>
<li>Click <strong>Submit</strong></li>
</ul>
<p>Your domain is now configured to accept users provisioned via BlokSec. </p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-users-and-assigning-licenses">Creating Users and Assigning Licenses<a href="#creating-users-and-assigning-licenses" class="hash-link" aria-label="Direct link to Creating Users and Assigning Licenses" title="Direct link to Creating Users and Assigning Licenses">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bloksec-admin-ui">BlokSec Admin UI<a href="#bloksec-admin-ui" class="hash-link" aria-label="Direct link to BlokSec Admin UI" title="Direct link to BlokSec Admin UI">​</a></h3>
<ol>
<li>
<p>Log into the BlokSec Admin UI with an admin user</p>
</li>
<li>
<p>Navigate to <strong>Applications</strong> &gt; <strong>Microsoft 365</strong> &gt; (Cog menu) &gt; <strong>Create Account</strong></p>
</li>
<li>
<p>Fill in the user&#x27;s details. Note that <strong>Email</strong>will be used to send the registration, and <strong>Account Name</strong> is the new Microsoft 365 account name. For new users who do not have access to their Microsoft 365 email inbox to retrieve the registration email yet (they must first register with BlokSec to be able to login) we recommend using the secondary / personal email address for <strong>Email</strong></p>
</li>
</ol>
<p><img loading="lazy" src="https://archbee-image-uploads.s3.amazonaws.com/VWdvJhEwmWfQ4iv0DDt5P/bqum8YmsWR3P0UIElqwjc_screenshot-2023-04-17-at-115417-am.png" alt="Create Account example" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="microsoft-365-admin-center">Microsoft 365 Admin Center<a href="#microsoft-365-admin-center" class="hash-link" aria-label="Direct link to Microsoft 365 Admin Center" title="Direct link to Microsoft 365 Admin Center">​</a></h3>
<ol>
<li>
<p>Log into the <a href="https://admin.microsoft.com" target="_blank" rel="noopener noreferrer">Microsoft 365 Admin Center</a> as an administrative user</p>
</li>
<li>
<p>Select the user who was created above</p>
</li>
<li>
<p>Select the <strong>Licenses and apps</strong> tab</p>
</li>
<li>
<p>Select the Microsoft 365 license type you would like added to the new user</p>
</li>
</ol>
<p><img loading="lazy" src="https://archbee-image-uploads.s3.amazonaws.com/VWdvJhEwmWfQ4iv0DDt5P/FJ_7u6NkjjXvtQX5ic2_N_screenshot-2023-04-17-at-120422-pm.png" alt="Example M365 license application" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/integration">Integration</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/microsoft">Microsoft</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/ws-fed">WS-FED</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/integrations/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Integrations Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a><ul><li><a href="#configure-authentication-in-the-bloksec-admin-ui" class="table-of-contents__link toc-highlight">Configure Authentication in the BlokSec Admin UI</a></li><li><a href="#domain-federation-via-powershell" class="table-of-contents__link toc-highlight">Domain Federation via PowerShell</a></li></ul></li><li><a href="#provisioning" class="table-of-contents__link toc-highlight">Provisioning</a><ul><li><a href="#azure-ad-administration-portal" class="table-of-contents__link toc-highlight">Azure AD Administration Portal</a></li><li><a href="#configure-api-permissions" class="table-of-contents__link toc-highlight">Configure API Permissions</a></li><li><a href="#configure-provisioning-in-the-bloksec-admin-ui" class="table-of-contents__link toc-highlight">Configure Provisioning in the BlokSec Admin UI</a></li></ul></li><li><a href="#creating-users-and-assigning-licenses" class="table-of-contents__link toc-highlight">Creating Users and Assigning Licenses</a><ul><li><a href="#bloksec-admin-ui" class="table-of-contents__link toc-highlight">BlokSec Admin UI</a></li><li><a href="#microsoft-365-admin-center" class="table-of-contents__link toc-highlight">Microsoft 365 Admin Center</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/intro">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/integrations/intro">Integrations</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/bloksec" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/bloksec" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BlokSec Technologies Inc.</div></div></div></footer></div>
</body>
</html>